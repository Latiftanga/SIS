<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dashboard{% endblock %} | SmartSIS</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        .htmx-indicator { display: none; }
        .htmx-request .htmx-indicator { display: inline-block; }
        #sidebar { transition: width 0.3s ease; }
        #sidebar.w-20 .sidebar-text, #sidebar.w-20 .sidebar-divider { display: none; }
        #sidebar.w-20 .menu a { justify-content: center; }
    </style>
    <script>
        (function() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
</head>
<body class="bg-base-200" hx-boost="true">
    {% include 'dashboard/includes/_header.html' %}
    <div class="flex">
        {% include 'dashboard/includes/_sidebar.html' %}
        <main id="main-content" class="flex-1 p-4 lg:p-6">
            {% block content %}{% endblock %}
        </main>
    </div>
    <script>
        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            sb.classList.toggle('w-64'); sb.classList.toggle('w-20');
        }
        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }
        document.body.addEventListener('htmx:configRequest', (e) => e.detail.headers['X-CSRFToken'] = '{{ csrf_token }}');
    </script>
</body>
</html>